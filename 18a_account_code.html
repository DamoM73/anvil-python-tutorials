<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Switch Component Method" href="19_switch_components.html" /><link rel="prev" title="AccountComponent Layout" href="18_account_cmpt.html" />

    <link rel="shortcut icon" href="_static/logo.ico"/><!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>AccountComponent Code - StudyM8</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=4476ed65" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: gill sans, sans-serif;
  --font-stack--monospace: monaco, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">StudyM8</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">StudyM8</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_web_intro.html">How websites work</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_studyM8_design.html">StudyM8 design</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_create_app.html">Create new app</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_anvil_interface.html">Anvil Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_create_home_form.html">Create the Main Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_create_components.html">Adding Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_connect_links.html">Connecting links</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_set_start_component.html">Set the Initial Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_adjust_title.html">Adjust Page Title</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_active_link.html">Show Active Link</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_add_users.html">Adding Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_user_features.html">User Management Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_account_links_visiability.html">Account Links Visibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_set_details.html">SetDetailsComponent Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="15a_set_details_code.html">SetDetailsComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_user_service.html">User Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="17_set_details_nav.html">SetDetailsComponent Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_account_cmpt.html">AccountComponent Layout</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">AccountComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="19_switch_components.html">Switch Component Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="20_complete_account_cmpt.html">Complete Account Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="21_assessment_table.html">The Assessments Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="22_add_component.html">AddComponent Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="22a_add_component_code.html">AddComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="23_assessment_service.html">Assessment Service Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="24_restrict_accessibility.html">Prevent Unauthorised Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="25_home_user_cmpt.html">HomeComponent Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="25a_home_component_code.html">HomeComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="26_complete_assessment.html">Complete Assessments</a></li>
<li class="toctree-l1"><a class="reference internal" href="26a_adjust_assessment_display.html">Adjust Assessments Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="27_edit_assessment.html">Edit Assessments Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="27a_edit_assessment_code.html">Edit Assessments Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="28_calendar_cmpt.html">CalendarComponent Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="28a_calendar_cmpt_code.html">CalendarComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="29_welcome.html">Welcome Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="30_optimisation.html">Optimisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="31_remote_database.html">Reduce Remote Database Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="32_logout_func.html">Create Logout Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="33_update_user_func.html">Create Update User Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="34_my_assess_func.html">My Assessments Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="34a_get_chart_func.html">Get Chart Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="35_local_database.html">Reduce Local Database Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="98_resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="99_topics.html">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="licencing.html">Licensing</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/18a_account_code.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="accountcomponent-code">
<h1>AccountComponent Code<a class="headerlink" href="#accountcomponent-code" title="Link to this heading">¶</a></h1>
<aside class="topic">
<p class="topic-title">In this tutorial you will:</p>
<ul class="simple">
<li><p>Retrieve and display the user’s details using <code class="docutils literal notranslate"><span class="pre">anvil.users.get_user()</span></code>.</p></li>
<li><p>Link the Edit Details button to the SetDetailsComponent.</p></li>
<li><p>Understand and resolve circular references in code imports.</p></li>
<li><p>Refactor navigation code for better organization and maintenance.</p></li>
</ul>
</aside>
<section id="planning">
<h2>Planning<a class="headerlink" href="#planning" title="Link to this heading">¶</a></h2>
<p>Now that we have the <strong>AccountComponent</strong> layout completed we need to write the code that:</p>
<ol class="arabic simple">
<li><p>Retrieves and displays the user’s details</p></li>
<li><p>Connects the <strong>Edit Details</strong> button to the <strong>SetDetailsComponent</strong></p></li>
</ol>
<p>We know that we can use <code class="docutils literal notranslate"><span class="pre">anvil.users.get_user()</span></code> to retrieve user details and we also know that we can access these details like a dictionary.</p>
<p>We also have create the code to load the <strong>SetDetailsComponent</strong>, so we just need to copy that.</p>
</section>
<section id="code">
<h2>Code<a class="headerlink" href="#code" title="Link to this heading">¶</a></h2>
<section id="display-users-details">
<h3>Display users details<a class="headerlink" href="#display-users-details" title="Link to this heading">¶</a></h3>
<p>To display the current user’s details:</p>
<ol class="arabic simple">
<li><p>Open the <strong>AccountComponent</strong> in code mode</p></li>
<li><p>We want to load the first and last name before the form opens, so go to the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p></li>
<li><p>Add the highlighted code below</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">11</span>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
<span class="linenos">12</span>    <span class="c1"># Set Form properties and Data Bindings.</span>
<span class="linenos">13</span>    <span class="bp">self</span><span class="o">.</span><span class="n">init_components</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="c1"># Any code you write here will run before the form opens.</span>
<span class="hll"><span class="linenos">16</span>    <span class="n">user</span> <span class="o">=</span> <span class="n">anvil</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">get_user</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">17</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_first_name</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s2">&quot;first_name&quot;</span><span class="p">]</span>
</span><span class="hll"><span class="linenos">18</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_last_name</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s2">&quot;last_name&quot;</span><span class="p">]</span>
</span></pre></div>
</div>
<p>This should occur every time that the <strong>AccountComponent</strong> is loaded.</p>
<section id="test-user-details-display">
<h4>Test user details display<a class="headerlink" href="#test-user-details-display" title="Link to this heading">¶</a></h4>
<p>Let’s test this first stage. Launch your website.</p>
<ol class="arabic simple">
<li><p>Login if you have to</p></li>
<li><p>Click on the Account link</p></li>
<li><p>Check that the names have been populated</p></li>
</ol>
<p><img alt="testing account details" src="_images/testing_account.gif" /></p>
</section>
</section>
<section id="link-edit-details-button">
<h3>Link Edit Details Button<a class="headerlink" href="#link-edit-details-button" title="Link to this heading">¶</a></h3>
<p>Now to link the <strong>Edit Details</strong> button.</p>
<section id="create-handler">
<h4>Create handler<a class="headerlink" href="#create-handler" title="Link to this heading">¶</a></h4>
<p>To do this we will need to:</p>
<ol class="arabic simple">
<li><p>Change into Layout mode to</p></li>
<li><p>Create a handler for the <strong>button_edit_click</strong> event by clicking <strong>on click event</strong></p></li>
</ol>
<p><img alt="button edit click handler" src="_images/button_edit_click_handler.gif" /></p>
</section>
<section id="copy-code-from-mainform">
<h4>Copy code from MainForm<a class="headerlink" href="#copy-code-from-mainform" title="Link to this heading">¶</a></h4>
<p>The <strong>link_register_click</strong> hander in the <strong>MainForm</strong> has the code to load the the SetDetailsComponent. Therefore:</p>
<ol class="arabic simple">
<li><p>Open <strong>MainForm</strong> in code mode</p></li>
<li><p>Go to the <strong>link_register_click</strong> event handler</p></li>
<li><p><strong>Copy</strong> the highlighted code below</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">68</span>  <span class="k">def</span><span class="w"> </span><span class="nf">link_register_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="linenos">69</span>    <span class="n">anvil</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">signup_with_form</span><span class="p">(</span><span class="n">allow_cancel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="hll"><span class="linenos">70</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">71</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">SetDetailsComponent</span><span class="p">())</span>
</span><span class="hll"><span class="linenos">72</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">breadcrumb_stem</span> <span class="o">+</span> <span class="s2">&quot; - Details&quot;</span>
</span><span class="hll"><span class="linenos">73</span>    <span class="bp">self</span><span class="o">.</span><span class="n">set_active_link</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="add-it-to-the-button-edit-click-hanlder">
<h4>Add it to the button_edit_click hanlder<a class="headerlink" href="#add-it-to-the-button-edit-click-hanlder" title="Link to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Return to <strong>AccountComponent</strong></p></li>
<li><p>Go to the the <strong>button_edit_click</strong> handler</p></li>
<li><p>Paste the code</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">20</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_edit_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="hll"><span class="linenos">21</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">22</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">SetDetailsComponent</span><span class="p">())</span>
</span><span class="hll"><span class="linenos">23</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">breadcrumb_stem</span> <span class="o">+</span> <span class="s2">&quot; - Account - Details&quot;</span>
</span><span class="hll"><span class="linenos">24</span>    <span class="bp">self</span><span class="o">.</span><span class="n">set_active_link</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="fix-reference-to-self">
<h4>Fix reference to self<a class="headerlink" href="#fix-reference-to-self" title="Link to this heading">¶</a></h4>
<p>Remember in the <strong>SetDetailsComponent</strong>, we used <code class="docutils literal notranslate"><span class="pre">get_open_form</span></code> to reference the <strong>MainForm</strong>? We had to change all the <code class="docutils literal notranslate"><span class="pre">self</span></code> references so they reference the <strong>MainForm</strong>.</p>
<p>We need to do that again.</p>
<p>First, add the highlighted code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">20</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_edit_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="hll"><span class="linenos">21</span>    <span class="n">main_form</span> <span class="o">=</span> <span class="n">get_open_form</span><span class="p">()</span>
</span><span class="linenos">22</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="linenos">23</span>    <span class="bp">self</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">SetDetailsComponent</span><span class="p">())</span>
<span class="linenos">24</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">breadcrumb_stem</span> <span class="o">+</span> <span class="s2">&quot; - Account - Details&quot;</span>
<span class="linenos">25</span>    <span class="bp">self</span><span class="o">.</span><span class="n">set_active_link</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, in the highlighted code, replace every <code class="docutils literal notranslate"><span class="pre">self</span></code> with <code class="docutils literal notranslate"><span class="pre">main_form</span></code> (hint: there are six of them.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">20</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_edit_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="linenos">21</span>    <span class="n">main_form</span> <span class="o">=</span> <span class="n">get_open_form</span><span class="p">()</span>
<span class="hll"><span class="linenos">22</span>    <span class="n">main_form</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">23</span>    <span class="n">main_form</span><span class="o">.</span><span class="n">content_panel</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">SetDetailsComponent</span><span class="p">())</span>
</span><span class="hll"><span class="linenos">24</span>    <span class="n">main_form</span><span class="o">.</span><span class="n">label_title</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">main_form</span><span class="o">.</span><span class="n">breadcrumb_stem</span> <span class="o">+</span> <span class="s2">&quot; - Account - Details&quot;</span>
</span><span class="hll"><span class="linenos">25</span>    <span class="n">main_form</span><span class="o">.</span><span class="n">set_active_link</span><span class="p">(</span><span class="s2">&quot;details&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Notice that there is a brown squiggly line under <code class="docutils literal notranslate"><span class="pre">SetDetailsComponent()</span></code>. This is telling you that the <strong>AccountComponent</strong> can’t find the <strong>SetDetailsComponents</strong>. To fix this we need to use the code below to import <strong>SetDetailsComponents</strong> (remember, check the line numbers).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">._anvil_designer</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccountComponentTemplate</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="linenos">3</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.server</span>
<span class="linenos">4</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tables</span>
<span class="linenos">5</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables.query</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">q</span>
<span class="linenos">6</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="kn">import</span> <span class="n">app_tables</span>
<span class="linenos">7</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.users</span>
<span class="hll"><span class="linenos">8</span><span class="kn">from</span><span class="w"> </span><span class="nn">..SetDetailsComponent</span><span class="w"> </span><span class="kn">import</span> <span class="n">SetDetailsComponent</span>
</span></pre></div>
</div>
</section>
<section id="test-button">
<h4>Test button<a class="headerlink" href="#test-button" title="Link to this heading">¶</a></h4>
<p>Almost finished this, just the testing left to go.</p>
<p>Launch your website.</p>
<p><span style="color: #ff0000;"><strong>YIKES!</strong></span></p>
<p>You will have gotten the following error:</p>
<p><img alt="circular reference" src="_images/circular_reference.png" /></p>
<p><strong>What on earth is a circular reference?</strong></p>
</section>
</section>
</section>
<section id="solving-our-circular-reference">
<h2>Solving our circular reference<a class="headerlink" href="#solving-our-circular-reference" title="Link to this heading">¶</a></h2>
<section id="what-is-a-circular-reference">
<h3>What is a circular reference<a class="headerlink" href="#what-is-a-circular-reference" title="Link to this heading">¶</a></h3>
<p>Our circular refence is caused by our imports.</p>
<p>The <strong>SetDetailsComponent</strong> import statements are as below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">._anvil_designer</span><span class="w"> </span><span class="kn">import</span> <span class="n">SetDetailsComponentTemplate</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="linenos">3</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.server</span>
<span class="linenos">4</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tables</span>
<span class="linenos">5</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables.query</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">q</span>
<span class="linenos">6</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="kn">import</span> <span class="n">app_tables</span>
<span class="linenos">7</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.users</span>
<span class="hll"><span class="linenos">8</span><span class="kn">from</span><span class="w"> </span><span class="nn">..AccountComponent</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccountComponent</span>
</span></pre></div>
</div>
<p>While our <strong>AccountComponent</strong> import statements are like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">._anvil_designer</span><span class="w"> </span><span class="kn">import</span> <span class="n">AccountComponentTemplate</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="linenos">3</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.server</span>
<span class="linenos">4</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tables</span>
<span class="linenos">5</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables.query</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">q</span>
<span class="linenos">6</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="kn">import</span> <span class="n">app_tables</span>
<span class="linenos">7</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.users</span>
<span class="hll"><span class="linenos">8</span><span class="kn">from</span><span class="w"> </span><span class="nn">..SetDetailsComponent</span><span class="w"> </span><span class="kn">import</span> <span class="n">SetDetailsComponent</span>
</span></pre></div>
</div>
<p>If you look at the highlighted lines your will notice that:</p>
<ul class="simple">
<li><p>the <strong>AccountsComponent</strong> imports the <strong>SetDetailsComponent</strong></p></li>
<li><p>the <strong>SetDetailsComponent</strong> imports the <strong>AccountsComponent</strong></p></li>
</ul>
<p>So when you website launches and it reads all the code, the <strong>AccountsComponent</strong> wants to load all the code from the <strong>SetDetailsComponent</strong> which wants to load all the code from the <strong>AccountsComponent</strong> which wants to load all the code from the <strong>SetDetailsComponent</strong> which wants to load all the code from the <strong>AccountsComponent</strong> which wants to load all the code from the <strong>SetDetailsComponent</strong> which wants to load all the code from the… you get the idea.</p>
<p>Two items of code are referring to each other, hence the term circular reference.</p>
</section>
<section id="why-did-it-occur">
<h3>Why did it occur<a class="headerlink" href="#why-did-it-occur" title="Link to this heading">¶</a></h3>
<p>This circular reference was caused because we have been very messy with out code, in particular our navigating code. You might have already noticed that we haven’t been too stringent in applying the DRY principle, for example:</p>
<ul class="simple">
<li><p>we have navigation code in the <strong>MainForm</strong>, the <strong>SetDetailsComponent</strong> and the <strong>AccountComponent</strong></p></li>
<li><p>we also have repetition of similar code in each of the <strong>link click handlers</strong> in the <strong>MainCode</strong></p></li>
</ul>
</section>
<section id="how-to-resolve-it">
<h3>How to resolve it<a class="headerlink" href="#how-to-resolve-it" title="Link to this heading">¶</a></h3>
<p>We need to <strong>refactor</strong> our code and bring all the navigation code into one place. This we will do in the next tutorial.</p>
<div class="note admonition">
<p class="admonition-title">Refactoring code</p>
<p>Refactoring code means improving the structure and readability of your code without changing what it does. It’s like cleaning up your room: you reorganize everything to make it easier to find and use, but you don’t throw anything away or change how your room works.</p>
<p>By refactoring, you make your code clearer, easier to understand, and simpler to maintain, which helps you and others work with it more effectively in the future.</p>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="19_switch_components.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Switch Component Method</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="18_account_cmpt.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">AccountComponent Layout</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Damien Murtagh
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/DamoM73/anvil-python-tutorials" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">AccountComponent Code</a><ul>
<li><a class="reference internal" href="#planning">Planning</a></li>
<li><a class="reference internal" href="#code">Code</a><ul>
<li><a class="reference internal" href="#display-users-details">Display users details</a><ul>
<li><a class="reference internal" href="#test-user-details-display">Test user details display</a></li>
</ul>
</li>
<li><a class="reference internal" href="#link-edit-details-button">Link Edit Details Button</a><ul>
<li><a class="reference internal" href="#create-handler">Create handler</a></li>
<li><a class="reference internal" href="#copy-code-from-mainform">Copy code from MainForm</a></li>
<li><a class="reference internal" href="#add-it-to-the-button-edit-click-hanlder">Add it to the button_edit_click hanlder</a></li>
<li><a class="reference internal" href="#fix-reference-to-self">Fix reference to self</a></li>
<li><a class="reference internal" href="#test-button">Test button</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#solving-our-circular-reference">Solving our circular reference</a><ul>
<li><a class="reference internal" href="#what-is-a-circular-reference">What is a circular reference</a></li>
<li><a class="reference internal" href="#why-did-it-occur">Why did it occur</a></li>
<li><a class="reference internal" href="#how-to-resolve-it">How to resolve it</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=6fefd858"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>