<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Assessment Service Module" href="23_assessment_service.html" /><link rel="prev" title="AddComponent Design" href="22_add_component.html" />

    <link rel="shortcut icon" href="_static/logo.ico"/><!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>AddComponent Code - StudyM8</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=4476ed65" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: gill sans, sans-serif;
  --font-stack--monospace: monaco, monospace;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">StudyM8</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">StudyM8</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_web_intro.html">How websites work</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_studyM8_design.html">StudyM8 design</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_create_app.html">Create new app</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_anvil_interface.html">Anvil Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_create_home_form.html">Create the Main Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_create_components.html">Adding Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_connect_links.html">Connecting links</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_set_start_component.html">Set the Initial Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_adjust_title.html">Adjust Page Title</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_active_link.html">Show Active Link</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_add_users.html">Adding Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_user_features.html">User Management Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_account_links_visiability.html">Account Links Visibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_set_details.html">SetDetailsComponent Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="15a_set_details_code.html">SetDetailsComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_user_service.html">User Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="17_set_details_nav.html">SetDetailsComponent Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_account_cmpt.html">AccountComponent Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="18a_account_code.html">AccountComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="19_switch_components.html">Switch Component Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="20_complete_account_cmpt.html">Complete Account Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="21_assessment_table.html">The Assessments Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="22_add_component.html">AddComponent Design</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">AddComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="23_assessment_service.html">Assessment Service Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="24_restrict_accessibility.html">Prevent Unauthorised Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="25_home_user_cmpt.html">HomeComponent Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="25a_home_component_code.html">HomeComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="26_complete_assessment.html">Complete Assessments</a></li>
<li class="toctree-l1"><a class="reference internal" href="26a_adjust_assessment_display.html">Adjust Assessments Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="27_edit_assessment.html">Edit Assessments Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="27a_edit_assessment_code.html">Edit Assessments Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="28_calendar_cmpt.html">CalendarComponent Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="28a_calendar_cmpt_code.html">CalendarComponent Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="29_welcome.html">Welcome Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="30_optimisation.html">Optimisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="31_remote_database.html">Reduce Remote Database Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="32_logout_func.html">Create Logout Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="33_update_user_func.html">Create Update User Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="34_my_assess_func.html">My Assessments Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="34a_get_chart_func.html">Get Chart Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="35_local_database.html">Reduce Local Database Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="98_resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="99_topics.html">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="licencing.html">Licensing</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/22a_add_component_code.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="addcomponent-code">
<h1>AddComponent Code<a class="headerlink" href="#addcomponent-code" title="Link to this heading">¶</a></h1>
<aside class="topic">
<p class="topic-title">In this tutorial you will:</p>
<ul class="simple">
<li><p>Initialize variables in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p></li>
<li><p>Implement validation in <code class="docutils literal notranslate"><span class="pre">button_add_click</span></code> event handler.</p></li>
<li><p>Display save messages and reset the form.</p></li>
<li><p>Refactor code to use methods for displaying error and save messages.</p></li>
<li><p>Clear form inputs after saving.</p></li>
</ul>
</aside>
<p>Now that we have create the layout for the AddComponent, we need to write the code to run it. Eventually we want to save the details to a table, but we haven’t made a table yet, so we will simply display the data as a save message</p>
<section id="planning">
<h2>Planning<a class="headerlink" href="#planning" title="Link to this heading">¶</a></h2>
<p>There are two events that will trigger code:</p>
<ul class="simple">
<li><p>loading the component → initialise variable to store the user input</p></li>
<li><p>clicking the <strong>Add Assessment</strong> button → validate the user’s input, display save message and reset the form.</p></li>
</ul>
</section>
<section id="coding">
<h2>Coding<a class="headerlink" href="#coding" title="Link to this heading">¶</a></h2>
<p>Now we know what we are doing, open the <strong>AddComponent</strong> in Code mode.</p>
<section id="initialising-variable">
<h3>Initialising variable<a class="headerlink" href="#initialising-variable" title="Link to this heading">¶</a></h3>
<p>We need to create variables to store all the user’s input. This needs to occur in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">10</span><span class="k">class</span><span class="w"> </span><span class="nc">AddComponent</span><span class="p">(</span><span class="n">AddComponentTemplate</span><span class="p">):</span>
<span class="linenos">11</span>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
<span class="linenos">12</span>    <span class="c1"># Set Form properties and Data Bindings.</span>
<span class="linenos">13</span>    <span class="bp">self</span><span class="o">.</span><span class="n">init_components</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
<span class="hll"><span class="linenos">14</span>    <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">15</span>    <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">16</span>    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span class="hll"><span class="linenos">17</span>    <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>lines 14 &amp; 15</strong> → since <strong>Subject</strong> and <strong>Details</strong> store text, we create empty strings for their variables.</p></li>
<li><p><strong>lines 16 &amp; 15</strong> → <strong>Start</strong> and <strong>Due</strong> are both dates, which are objects, so their empty variables are set using <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</div>
<p>We also need to make sure the error message is invisible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">10</span><span class="k">class</span><span class="w"> </span><span class="nc">AddComponent</span><span class="p">(</span><span class="n">AddComponentTemplate</span><span class="p">):</span>
<span class="linenos">11</span>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
<span class="linenos">12</span>    <span class="c1"># Set Form properties and Data Bindings.</span>
<span class="linenos">13</span>    <span class="bp">self</span><span class="o">.</span><span class="n">init_components</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
<span class="linenos">14</span>    <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">15</span>    <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">16</span>    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">17</span>    <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Any code you write here will run before the form opens.</span>
<span class="hll"><span class="linenos">20</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>line 20</strong> → sets the label error to not vissible</p></li>
</ul>
</div>
</section>
<section id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Link to this heading">¶</a></h3>
<p>Now we need to make the <code class="docutils literal notranslate"><span class="pre">button_add_click</span></code> event handler.</p>
<p><img alt="event handler" src="_images/create_event.gif" /></p>
<p>The first code we add to the <code class="docutils literal notranslate"><span class="pre">button_add_click</span></code> event handler checks that the user has entered data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_add_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="hll"><span class="linenos">23</span>    <span class="c1"># validation</span>
</span><span class="hll"><span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">25</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">26</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Subject name needed&quot;</span>
</span><span class="hll"><span class="linenos">27</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">28</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">29</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Assessment details needed&quot;</span>
</span><span class="hll"><span class="linenos">30</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">31</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">32</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Start date needed&quot;</span>
</span><span class="hll"><span class="linenos">33</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Due date needed&quot;</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>lines 24 &amp; 27</strong> → checks that the text box has a value (remember string truthiness)</p></li>
<li><p><strong>lines 30 &amp; 33</strong> → checks that a date has been picked (remember object truthiness)</p></li>
<li><p><strong>lines 25, 28, 31 &amp; 34</strong> → make the error message visible</p></li>
<li><p><strong>lines 26, 29, 32 &amp; 35</strong> → display the error message</p></li>
</ul>
</div>
<section id="validation-testing">
<h4>Validation testing<a class="headerlink" href="#validation-testing" title="Link to this heading">¶</a></h4>
<p>Launch your website and check that it produces an error message for each input element.</p>
</section>
</section>
<section id="save-message">
<h3>Save Message<a class="headerlink" href="#save-message" title="Link to this heading">¶</a></h3>
<p>Now we want to display a message to the user about what values will be saved.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_add_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="linenos">23</span>    <span class="c1"># validation</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="linenos">25</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">26</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Subject name needed&quot;</span>
<span class="linenos">27</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="linenos">28</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">29</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Assessment details needed&quot;</span>
<span class="linenos">30</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="linenos">31</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">32</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Start date needed&quot;</span>
<span class="linenos">33</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Due date needed&quot;</span>
<span class="hll"><span class="linenos">36</span>    <span class="k">else</span><span class="p">:</span>
</span><span class="hll"><span class="linenos">37</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">38</span>      <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span>
</span><span class="hll"><span class="linenos">39</span>      <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span>
</span><span class="hll"><span class="linenos">40</span>      <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span>
</span><span class="hll"><span class="linenos">41</span>      <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span>
</span><span class="hll"><span class="linenos">42</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="si">}</span><span class="s2"> assessment: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="si">}</span><span class="s2"> recorded&quot;</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>line 37</strong> → makes the message available</p></li>
<li><p><strong>lines 38 - 41</strong> → reads the values from the form and stores them in the variables</p></li>
<li><p><strong>line 42</strong> → creates a string displaying the message and displays it in the error message label.</p></li>
</ul>
</div>
<section id="save-testing">
<h4>Save testing<a class="headerlink" href="#save-testing" title="Link to this heading">¶</a></h4>
<p>Launch your website and check if it works. Enter a subject, assessment details, start date and due date, then click the <strong>Add Assessment</strong> button.</p>
<p><img alt="testing save" src="_images/test_save.gif" /></p>
<p>We can make a few observations from this test:</p>
<ol class="arabic simple">
<li><p>The save message should not look the same as the error message</p></li>
<li><p>When the same message is presented, the input values in the form should be reset</p></li>
</ol>
<p>Let’s fix those up.</p>
</section>
</section>
<section id="fixing-messaging">
<h3>Fixing messaging<a class="headerlink" href="#fixing-messaging" title="Link to this heading">¶</a></h3>
<p>The problem we have with the save message is that it is using the same format at the error message. There are two solutions:</p>
<ol class="arabic simple">
<li><p>Add another label for the save message, or</p></li>
<li><p>Change the format of the error label.</p></li>
</ol>
<p>Neither one has an advantage over the other, so, for no particular reason, we will change the format of the error label.</p>
<p>This will involve changing the following label properties:</p>
<ul class="simple">
<li><p>foreground colour</p></li>
<li><p>icon</p></li>
<li><p>bold</p></li>
</ul>
<p>If we look at our code, this will need to happen for each of the error messages, as well as the save message. That means in five different locations. This is started to get quite repetitive. If we put this code through, and then decide to change the error foreground colour, we will need to fix it in multiple places. This is a classic example of the <strong>DRY</strong> principle. The means, it’s time to <strong>refactor</strong>.</p>
<section id="refactor-plan">
<h4>Refactor plan<a class="headerlink" href="#refactor-plan" title="Link to this heading">¶</a></h4>
<p>What we will do is create two methods to:</p>
<ul class="simple">
<li><p>display an error message</p></li>
<li><p>display a save message</p></li>
</ul>
<p>These methods will contain the appropriate formatting and then change the label text.</p>
<p>Speaking of the label, the name <strong>label_error</strong> doesn’t seem appropriate now, sow we will change it to <strong>label_message</strong>.</p>
<p>So, before refactoring the code, first change back to the <strong>Design</strong> mode and change the name of <strong>label_error</strong> to <strong>label_message</strong>.</p>
<p><img alt="change label" src="_images/change_label.gif" /></p>
</section>
<section id="display-error">
<h4>Display error<a class="headerlink" href="#display-error" title="Link to this heading">¶</a></h4>
<p>Now, back in the <strong>Code</strong> mode, we will first create the <strong>display_error</strong> method</p>
<p>Under the <strong>button_add_click</strong> handler add the following code (be careful with your indentations).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">44</span>  <span class="k">def</span><span class="w"> </span><span class="nf">display_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
</span><span class="hll"><span class="linenos">45</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">46</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
</span><span class="hll"><span class="linenos">47</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa:exclamation-triangle&quot;</span>
</span><span class="hll"><span class="linenos">48</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">49</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>line 44</strong> → creates the <code class="docutils literal notranslate"><span class="pre">display_error</span></code> method, which accepts an argument called <code class="docutils literal notranslate"><span class="pre">message</span></code></p></li>
<li><p><strong>line 45</strong> → turns the label visible</p></li>
<li><p><strong>line 46</strong> → changes the font colour to red</p></li>
<li><p><strong>line 47</strong> → sets the label’s icon</p></li>
<li><p><strong>line 48</strong> → makes the label bold</p></li>
<li><p><strong>line 49</strong> → makes the label display the message passed to it as an argument</p></li>
</ul>
</div>
<p>Now go back to the <strong>button_add_click</strong> handler and replace all the error label code with a call to <strong>display_error</strong>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_add_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="linenos">23</span>    <span class="c1"># validation</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="hll"><span class="linenos">25</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Subject name needed&quot;</span><span class="p">)</span>
</span><span class="linenos">26</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="hll"><span class="linenos">27</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Assessment details needed&quot;</span><span class="p">)</span>
</span><span class="linenos">28</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="hll"><span class="linenos">29</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Start date needed&quot;</span><span class="p">)</span>
</span><span class="linenos">30</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="hll"><span class="linenos">31</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Due date needed&quot;</span><span class="p">)</span>
</span><span class="linenos">32</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">33</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">36</span>      <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">37</span>      <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">38</span>      <span class="bp">self</span><span class="o">.</span><span class="n">label_error</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="si">}</span><span class="s2"> assessment: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="si">}</span><span class="s2"> recorded&quot;</span>
</pre></div>
</div>
</section>
<section id="display-save">
<h4>Display save<a class="headerlink" href="#display-save" title="Link to this heading">¶</a></h4>
<p>Now to add the <strong>display_save</strong> method.</p>
<p>Add the following code under the <strong>display_error</strong> method (remember to check indentation).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">47</span>  <span class="k">def</span><span class="w"> </span><span class="nf">display_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
</span><span class="hll"><span class="linenos">48</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
</span><span class="hll"><span class="linenos">49</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="s2">&quot;#000000&quot;</span>
</span><span class="hll"><span class="linenos">50</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa:save&quot;</span>
</span><span class="hll"><span class="linenos">51</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="kc">False</span>
</span><span class="hll"><span class="linenos">52</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>line 47</strong> → creates the <code class="docutils literal notranslate"><span class="pre">display_save</span></code> method, which accepts an argument called <code class="docutils literal notranslate"><span class="pre">message</span></code></p></li>
<li><p><strong>line 48</strong> → turns the label visible</p></li>
<li><p><strong>line 49</strong> → changes the font colour to black</p></li>
<li><p><strong>line 50</strong> → sets the label’s icon</p></li>
<li><p><strong>line 51</strong> → makes the label not bold</p></li>
<li><p><strong>line 52</strong> → makes the label display the message passed to it as an argument</p></li>
</ul>
</div>
<p>Now go back to the <strong>button_add_click</strong> handler and replace the save message code with a call to <strong>display_save</strong>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">32</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">33</span>      <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">36</span>      <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span>
<span class="hll"><span class="linenos">37</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_save</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="si">}</span><span class="s2"> assessment: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="si">}</span><span class="s2"> recorded&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="remove-any-other-reference-to-label-error">
<h4>Remove any other reference to <strong>label_error</strong><a class="headerlink" href="#remove-any-other-reference-to-label-error" title="Link to this heading">¶</a></h4>
<p>Use Anvil’s search function to check if there are any more references to <strong>label_error</strong> in <strong>AddComponent</strong> and then fix them.</p>
<p><img alt="search" src="_images/search.gif" /></p>
</section>
<section id="test-messaging">
<h4>Test messaging<a class="headerlink" href="#test-messaging" title="Link to this heading">¶</a></h4>
<p>Launch your website and check that all the error messages and the save message work as planned.</p>
<p><img alt="test message" src="_images/test_message.gif" /></p>
</section>
</section>
<section id="clear-form">
<h3>Clear Form<a class="headerlink" href="#clear-form" title="Link to this heading">¶</a></h3>
<p>The final step is to clear the user input and ready the form for the next assessment.</p>
<p>Under the <strong>display_save</strong> method add the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">54</span>  <span class="k">def</span><span class="w"> </span><span class="nf">reset_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll"><span class="linenos">55</span>    <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">56</span>    <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">57</span>    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span class="hll"><span class="linenos">58</span>    <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="kc">None</span>
</span><span class="hll"><span class="linenos">59</span>    <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">60</span>    <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="hll"><span class="linenos">61</span>    <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
</span><span class="hll"><span class="linenos">62</span>    <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>
</div>
<div class="notice admonition">
<p class="admonition-title">Code explaination</p>
<ul class="simple">
<li><p><strong>line 54</strong> → creates the <code class="docutils literal notranslate"><span class="pre">reset_form</span></code> method</p></li>
<li><p><strong>lines 55 - 58</strong> → returns all the variables to their initialisation state</p></li>
<li><p><strong>lines 59 - 62</strong> → clears all the input from the elements</p></li>
</ul>
</div>
<p>Since we only want to clear the form after it’s been saved, call the function from within the <strong>else</strong> section of the <strong>button_add_click</strong> handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">32</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">33</span>      <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">36</span>      <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">37</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_save</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="si">}</span><span class="s2"> assessment: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="si">}</span><span class="s2"> recorded&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">38</span>      <span class="bp">self</span><span class="o">.</span><span class="n">reset_form</span><span class="p">()</span>
</span></pre></div>
</div>
<section id="test-clear-form">
<h4>Test clear form<a class="headerlink" href="#test-clear-form" title="Link to this heading">¶</a></h4>
<p>Launch your website one more time and correctly enter all the required data. When you click the <strong>Add Assessment</strong> button, the save message should appear and all the input should be cleared.</p>
<p><img alt="test clear" src="_images/test_clear.gif" /></p>
</section>
</section>
</section>
<section id="final-code-state">
<h2>Final code state<a class="headerlink" href="#final-code-state" title="Link to this heading">¶</a></h2>
<p>By the end of this tutorial your code should be the same as below:</p>
<section id="final-addcomponent">
<h3>Final AddComponent<a class="headerlink" href="#final-addcomponent" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">._anvil_designer</span><span class="w"> </span><span class="kn">import</span> <span class="n">AddComponentTemplate</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="linenos"> 3</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.server</span>
<span class="linenos"> 4</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tables</span>
<span class="linenos"> 5</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.tables.query</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">q</span>
<span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">anvil.tables</span><span class="w"> </span><span class="kn">import</span> <span class="n">app_tables</span>
<span class="linenos"> 7</span><span class="kn">import</span><span class="w"> </span><span class="nn">anvil.users</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">class</span><span class="w"> </span><span class="nc">AddComponent</span><span class="p">(</span><span class="n">AddComponentTemplate</span><span class="p">):</span>
<span class="linenos">11</span>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">properties</span><span class="p">):</span>
<span class="linenos">12</span>    <span class="c1"># Set Form properties and Data Bindings.</span>
<span class="linenos">13</span>    <span class="bp">self</span><span class="o">.</span><span class="n">init_components</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
<span class="linenos">14</span>    <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">15</span>    <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">16</span>    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">17</span>    <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Any code you write here will run before the form opens.</span>
<span class="linenos">20</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
<span class="linenos">21</span>
<span class="linenos">22</span>  <span class="k">def</span><span class="w"> </span><span class="nf">button_add_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">event_args</span><span class="p">):</span>
<span class="linenos">23</span>    <span class="c1"># validation</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="linenos">25</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Subject name needed&quot;</span><span class="p">)</span>
<span class="linenos">26</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
<span class="linenos">27</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Assessment details needed&quot;</span><span class="p">)</span>
<span class="linenos">28</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="linenos">29</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Start date needed&quot;</span><span class="p">)</span>
<span class="linenos">30</span>    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="linenos">31</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_error</span><span class="p">(</span><span class="s2">&quot;Due date needed&quot;</span><span class="p">)</span>
<span class="linenos">32</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">33</span>      <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">34</span>      <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span>
<span class="linenos">35</span>      <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">36</span>      <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span>
<span class="linenos">37</span>      <span class="bp">self</span><span class="o">.</span><span class="n">display_save</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">details</span><span class="si">}</span><span class="s2"> assessment: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">due</span><span class="si">}</span><span class="s2"> recorded&quot;</span><span class="p">)</span>
<span class="linenos">38</span>      <span class="bp">self</span><span class="o">.</span><span class="n">reset_form</span><span class="p">()</span>
<span class="linenos">39</span>
<span class="linenos">40</span>  <span class="k">def</span><span class="w"> </span><span class="nf">display_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="linenos">41</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">42</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="s2">&quot;#ff0000&quot;</span>
<span class="linenos">43</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa:exclamation-triangle&quot;</span>
<span class="linenos">44</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">45</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
<span class="linenos">46</span>
<span class="linenos">47</span>  <span class="k">def</span><span class="w"> </span><span class="nf">display_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="linenos">48</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos">49</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="s2">&quot;#000000&quot;</span>
<span class="linenos">50</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa:save&quot;</span>
<span class="linenos">51</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">bold</span> <span class="o">=</span> <span class="kc">False</span>
<span class="linenos">52</span>    <span class="bp">self</span><span class="o">.</span><span class="n">label_message</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
<span class="linenos">53</span>
<span class="linenos">54</span>  <span class="k">def</span><span class="w"> </span><span class="nf">reset_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">55</span>    <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">56</span>    <span class="bp">self</span><span class="o">.</span><span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">57</span>    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">58</span>    <span class="bp">self</span><span class="o">.</span><span class="n">due</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">59</span>    <span class="bp">self</span><span class="o">.</span><span class="n">text_box_subject</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">60</span>    <span class="bp">self</span><span class="o">.</span><span class="n">text_box_details</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="linenos">61</span>    <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_start</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">62</span>    <span class="bp">self</span><span class="o">.</span><span class="n">date_picker_due</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="23_assessment_service.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Assessment Service Module</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="22_add_component.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">AddComponent Design</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Damien Murtagh
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/DamoM73/anvil-python-tutorials" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">AddComponent Code</a><ul>
<li><a class="reference internal" href="#planning">Planning</a></li>
<li><a class="reference internal" href="#coding">Coding</a><ul>
<li><a class="reference internal" href="#initialising-variable">Initialising variable</a></li>
<li><a class="reference internal" href="#validation">Validation</a><ul>
<li><a class="reference internal" href="#validation-testing">Validation testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#save-message">Save Message</a><ul>
<li><a class="reference internal" href="#save-testing">Save testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixing-messaging">Fixing messaging</a><ul>
<li><a class="reference internal" href="#refactor-plan">Refactor plan</a></li>
<li><a class="reference internal" href="#display-error">Display error</a></li>
<li><a class="reference internal" href="#display-save">Display save</a></li>
<li><a class="reference internal" href="#remove-any-other-reference-to-label-error">Remove any other reference to <strong>label_error</strong></a></li>
<li><a class="reference internal" href="#test-messaging">Test messaging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#clear-form">Clear Form</a><ul>
<li><a class="reference internal" href="#test-clear-form">Test clear form</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#final-code-state">Final code state</a><ul>
<li><a class="reference internal" href="#final-addcomponent">Final AddComponent</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=6fefd858"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>